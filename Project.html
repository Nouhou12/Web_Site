<!DOCTYPE html>
<html lang="""en
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Z-0101 is a website for showcasing projects.">
    <meta name="keywords" content="Projet Display">
    <meta name="author" content="Nouhou Issoufou">
    <link rel="canonical" href="https://nouhou12.github.io/Z-0101/Project.html" />
    <title>Website Template</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        // Retrieve the number from localStorage
        const myNumber = localStorage.getItem('myNumber');
        // When the DOM is loaded, display the number in the main section
        document.addEventListener('DOMContentLoaded', function() {
            const main = document.querySelector('header');
            const numberPara = document.createElement('h2');
            numberPara.textContent = 'Token: ' + myNumber;
            main.appendChild(numberPara);
        });
        document.addEventListener('DOMContentLoaded', function() {
            const main = document.querySelector('main');
            const url = "https://docs.google.com/spreadsheets/d/1e0nGG8TdJsgquZhWgCvKVqXyCoXomm2nYTvJdHT11SQ/gviz/tq?tqx=out:csv";

            fetch(url)
                .then(response => response.text())
                    .then(csv => {
                        console.log(csv); // Données brutes CSV
                        for(let i=0; i<= 10;i++){
                            const numberPara = document.createElement('div');
                            numberPara.textContent = 'ProjectName - description - Creator - Link';
                            main.appendChild(numberPara);
                        }          
            })
            .catch(error => console.error('Erreur:', error));

            // Loop intiatiating
            const numberPara = document.createElement('div');
            const numberPara2 = document.createElement('div');
            numberPara.textContent = 'ProjectName - description - Creator - Link';
            numberPara2.textContent = 'ProjectName - description - Creator - Link';
            main.appendChild(numberPara);
            main.appendChild(numberPara2);
        });
    </script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      const main = document.querySelector('main');
      const sheetId = "1e0nGG8TdJsgquZhWgCvKVqXyCoXomm2nYTvJdHT11SQ";
      const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv`;
      const proxy = "https://api.allorigins.win/raw?url="; // ✅ Proxy pour contourner CORS

      fetch(proxy + encodeURIComponent(url))
        .then(response => {
          if (!response.ok) throw new Error("Erreur réseau : " + response.status);
          return response.text();
        })
        .then(csv => {
          console.log("Données CSV :", csv);

          // Convertir le CSV en lignes
          const lignes = csv.split('\n');
          for (let i = 0; i < lignes.length; i++) {
            const colonnes = lignes[i].split(',');

            // Exemple : chaque ligne du Google Sheet → un bloc HTML
            const block = document.createElement('div');
            block.textContent = `${colonnes[0] || 'Nom'} - ${colonnes[1] || 'Description'} - ${colonnes[2] || 'Auteur'} - ${colonnes[3] || 'Lien'}`;
            main.appendChild(block);
          }
        })
        .catch(error => console.error('Erreur:', error));
    });
    </script>
</head>
<body>
    <header>
        <h1>My Website</h1>
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="FeaturedProject.html">Featured Project</a>
        <a href="Project.html">Project</a>
        <a href="Submit.html">Submit your own project</a>
        <a href="reward.html">Reward Page</a>
        <a href="Contact.html">Contact</a>
    </nav>
    <main>
        <h2>Welcome!</h2>
        <p>This is a project page.</p>
    </main>
    <footer>
        &copy; 2024 My Website
    </footer>
</body>
</html>